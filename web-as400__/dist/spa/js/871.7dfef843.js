"use strict";(self["webpackChunkweb_as400"]=self["webpackChunkweb_as400"]||[]).push([[871],{1390:(e,t,l)=>{l.d(t,{o:()=>a});l(6701);var r=l(7831);const a=(0,r.Q_)("as",{state:()=>({currentUser:"",queries:[],files:[],fastFiles:[],users:[],filenames:[]}),getters:{getCurrentUser:e=>e.currentUser,getQueries:e=>e.queries,getFiles:e=>e.files,getUsers:e=>e.users,getFilenames:e=>e.filenames,getFastFiles:e=>e.fastFiles},actions:{setCurrentUser(e){this.currentUser=e},async getQueriesAction(e){let t="http://"+window.location.hostname+":3300/files/all/?library="+e.lib+"&tablename="+e.fileName;e.lib,e.fileName;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.queries=r},async getFilesAction(e){let t="http://"+window.location.hostname+":3300/files/PRTFFLD1/?library="+e.lib+"&tablename="+e.fileName;e.lib,e.fileName;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.files=r},async getFastFilesAction(e){let t="http://"+window.location.hostname+":3300/files/PRTFFLD_SMART/?search_word="+e.search_word+"&user="+e.user+"&all="+e.all;e.search_word,e.user,e.all;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.fastFiles=r},async getUsersAction(e){let t="http://"+window.location.hostname+":3300/files/SCHEMA/?library="+e.user;e.user;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.users=r},async getFilenamesAction(e){const t="http://"+window.location.hostname+":3300/files/FILENAMES/?library="+e.filename,l=(e.filename,await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"})),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.filenames=r}}})},5214:(e,t,l)=>{l.d(t,{H:()=>a});l(6701);var r=l(7831);const a=(0,r.Q_)("pref",{state:()=>({userPref:[],insertOrDeleteStatus:null}),getters:{getUserPref:e=>e.userPref,getInsertOrDeleteStatus:e=>e.insertOrDeleteStatus,getUserPrefAsObj:e=>{if(e.userPref.length<1)return[];var t=[];return t.push({label:e.userPref[0].PREFL1,value:e.userPref[0].PREFL1}),"NULL"!==e.userPref[0].PREFL2&&""!==e.userPref[0].PREFL2.trim()&&t.push({label:e.userPref[0].PREFL2,value:e.userPref[0].PREFL2}),"NULL"!==e.userPref[0].PREFL3&&""!==e.userPref[0].PREFL3.trim()&&t.push({label:e.userPref[0].PREFL3,value:e.userPref[0].PREFL3}),"NULL"!==e.userPref[0].PREFL4&&""!==e.userPref[0].PREFL4.trim()&&t.push({label:e.userPref[0].PREFL4,value:e.userPref[0].PREFL4}),"NULL"!==e.userPref[0].PREFL5&&""!==e.userPref[0].PREFL5.trim()&&t.push({label:e.userPref[0].PREFL5,value:e.userPref[0].PREFL5}),t}},actions:{async setUserPref(e){let t="http://"+window.location.hostname+":3300/files/USERPREF/?user="+e;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.userPref=r},async insertOrUpdateUserPrefs(e){let t="http://"+window.location.hostname+":3300/files/inserOrUpdatePref/?libdat="+e.user+"&PREFL1="+e.prefl1+"&PREFL2="+e.prefl2+"&PREFL3="+e.prefl3+"&PREFL4="+e.prefl4+"&PREFL5="+e.prefl5;e.user,e.prefl1,e.prefl2,e.prefl3,e.prefl4,e.prefl5;const l=await fetch(t,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),r=await l.json();if(!l.ok)throw 409===r.code?new Error(r.message):new Error("Request failed with error code: "+l.status);this.insertOrDeleteStatus=r}}})},9871:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var r=l(3673);const a={class:"q-pa-md"},s={key:0,class:"q-pa-lg text-h6"},i={class:"q-gutter-md row"},o=(0,r.Uk)("No results"),n=(0,r.Uk)("No results"),d={class:"q-ml-lg"},c={style:{"margin-left":"130px"},inline:"",class:"flex flex-left"};function u(e,t,l,u,f,h){const m=(0,r.up)("q-option-group"),p=(0,r.up)("q-item-section"),g=(0,r.up)("q-item"),w=(0,r.up)("q-select"),E=(0,r.up)("q-toggle"),b=(0,r.up)("q-icon"),y=(0,r.up)("q-input"),F=(0,r.up)("q-btn"),P=(0,r.up)("q-checkbox"),L=(0,r.up)("q-card-section"),U=(0,r.up)("q-card"),A=(0,r.up)("q-table");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(U,{class:"q-my-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(L,{class:"q-py-lg q-px-lg"},{default:(0,r.w5)((()=>[f.pref.getUserPrefAsObj.length>0?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(m,{modelValue:f.group,"onUpdate:modelValue":[t[0]||(t[0]=e=>f.group=e),h.onGroupChange],options:f.pref.getUserPrefAsObj,color:"primary",inline:""},null,8,["modelValue","onUpdate:modelValue","options"])])):(0,r.kq)("",!0),(0,r._)("div",i,[(0,r.Wm)(w,{filled:"",modelValue:f.model,"onUpdate:modelValue":[t[1]||(t[1]=e=>f.model=e),h.onClickLibdat],"use-input":"","input-debounce":"0",label:"LIBDAT",clearable:"",options:f.options,onFilter:h.filterFn,behavior:"menu"},{"no-option":(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"text-grey"},{default:(0,r.w5)((()=>[o])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,r.Wm)(w,{filled:"",modelValue:f.fileNameModel,"onUpdate:modelValue":[t[2]||(t[2]=e=>f.fileNameModel=e),h.onClickFilename],"use-input":"",loading:f.loadingInputFiles,disable:f.loadingInputFiles,"input-debounce":"0",label:"FILE",autofocus:"",clearable:"",options:f.fileNamesOptions,onFilter:h.filterFileNames,behavior:"menu"},{"no-option":(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"text-grey"},{default:(0,r.w5)((()=>[n])),_:1})])),_:1})])),_:1},8,["modelValue","loading","disable","options","onFilter","onUpdate:modelValue"]),(0,r._)("div",d,[(0,r.Wm)(E,{modelValue:f.queryToggle,"onUpdate:modelValue":t[3]||(t[3]=e=>f.queryToggle=e),size:"xl",icon:"visibility",label:"Query first 10000 Records"},null,8,["modelValue"])]),(0,r._)("div",c,[(0,r.Wm)(y,{style:{"min-width":"200px"},square:"",color:"primary","label-color":"primary",outlined:"",clearable:"",modelValue:f.fastWordSearch,"onUpdate:modelValue":t[4]||(t[4]=e=>f.fastWordSearch=e),label:"Fast Search"},{append:(0,r.w5)((()=>[(0,r.Wm)(b,{name:"bolt",color:"primary"})])),_:1},8,["modelValue"]),(0,r.Wm)(F,{loading:f.loading,inline:"",color:"primary q-ml-sm",label:"Search","icon-right":"send",onClick:h.fastSearch,disable:null==f.fastWordSearch||""==f.fastWordSearch||f.fastWordSearch.length<3},null,8,["loading","onClick","disable"]),(0,r.Wm)(P,{class:"q-ml-xl",size:"lg","left-label":"",modelValue:f.deep,"onUpdate:modelValue":t[5]||(t[5]=e=>f.deep=e),label:"Ricerca profonda"},null,8,["modelValue"])])])])),_:1})])),_:1}),f.queryToggle?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(A,{key:0,dense:"","auto-width":"",class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white",grid:f.grid,rows:f.rows,columns:f.columns,"row-key":"name",loading:f.loading,boarderd:"",title:f.fileNameModel,separator:"cell",rowsPerPage:30,"rows-per-page-options":[0,8,18],style:{height:"640px"},filter:f.filter},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(y,{borderless:"",dense:"",debounce:"300",modelValue:f.filter,"onUpdate:modelValue":t[7]||(t[7]=e=>f.filter=e),placeholder:"Search word"},{append:(0,r.w5)((()=>[(0,r.Wm)(b,{name:"search",color:"white"}),(0,r.Wm)(E,{modelValue:f.grid,"onUpdate:modelValue":t[6]||(t[6]=e=>f.grid=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"]),(0,r.Wm)(F,{flat:"",class:"q-ml-xl",color:"yellow","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:h.exportTable},null,8,["onClick"])])),_:1},8,["grid","rows","columns","loading","title","filter"])),f.queryToggle?((0,r.wg)(),(0,r.j4)(A,{key:1,class:"text-subtitle2 my-sticky-header-table","table-header-class":"text-white",rows:f.queries,"row-key":"index",dense:"","auto-width":"",grid:f.grid,loading:f.loading,boarderd:"",title:f.fileNameModel,separator:"cell",style:{height:"640px"},filter:f.filter,rowsPerPage:1e4,"rows-per-page-options":[0,8,18]},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(y,{borderless:"",dense:"",debounce:"300",modelValue:f.filter,"onUpdate:modelValue":t[9]||(t[9]=e=>f.filter=e),placeholder:"Search"},{append:(0,r.w5)((()=>[(0,r.Wm)(b,{name:"search",color:"white"}),(0,r.Wm)(E,{modelValue:f.grid,"onUpdate:modelValue":t[8]||(t[8]=e=>f.grid=e),color:"red",label:"Grid"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["rows","grid","loading","title","filter"])):(0,r.kq)("",!0)])}var f=l(1959),h=l(2841),m=l(8825),p=l(1390),g=l(5214);const w={data(){return{q:(0,m.Z)(),as:null,pref:null,fastWordSearch:"",deep:!1,queries:[],queryToggle:!1,pagination:{rowsPerPage:0},group:(0,f.iH)(""),loadingInputFiles:!1,model:null,stringOptions:[],options:this.stringOptions,fileNameModel:null,filenamesArray:[],fileNamesOptions:this.filenamesArray,separator:"vertical",filter:"",grid:!1,loading:!1,fileName:"ROLE_USER",lib:"WRKJEXP",rows:[],columns:[{name:"COLUMN_NAME",label:"CAMPO",field:"COLUMN_NAME",sortable:!0,align:"center"},{name:"COLUMN_TEXT",label:"DESCRIZIONE",field:"COLUMN_TEXT",sortable:!0,align:"left"},{name:"TABLE_SCHEMA",label:"LIBRERIA",field:"TABLE_SCHEMA",sortable:!0,align:"left"},{name:"TABLE_NAME",label:"FILE",field:"TABLE_NAME",sortable:!0,align:"left"},{name:"KEY_COLUMN",label:"CHIAVE",field:"KEY_COLUMN",sortable:!0,align:"left"},{name:"KEY_ORDER",label:"KEY_ORDER",field:"KEY_ORDER",sortable:!0,align:"left"},{name:"DATA_TYPE",label:"TIPO",field:"DATA_TYPE",sortable:!0},{name:"LENGTH",label:"LUNGHEZZA",field:"LENGTH",sortable:!0},{name:"NUMERIC_SCALE ",label:"DECIMALE",field:"NUMERIC_SCALE",sortable:!0},{name:"COLUMN_DEFAULT",label:"DEFAULT",field:"COLUMN_DEFAULT",sortable:!0},{name:"CHARACTER_MAXIMUM_LENGTH",label:"LUNGEZZA MASSIMA",field:"CHARACTER_MAXIMUM_LENGTH",sortable:!0}]}},methods:{fastSearch(){this.loadFastFiles()},onGroupChange(){this.model=this.group,this.loadFilenames(),this.fileNameModel=null},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((t=>this.wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n");(0,h.Z)("table-export.csv",e,"text/csv")},wrapCsvValue(e,t){let l=void 0!==t?t(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`},onClickLibdat(e){this.loadFilenames(),this.fileNameModel=null},onClickFilename(e){this.loadFiles()},filterFileNames(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.fileNamesOptions=this.filenamesArray.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.fileNamesOptions=this.filenamesArray})},filterFn(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=this.stringOptions.filter((e=>e.toLowerCase().indexOf(t)>-1))}:()=>{this.options=this.stringOptions})},async loadFiles(){if(this.fileNameModel){this.loading=!0,this.rows=[];try{const e={lib:this.model,fileName:this.fileNameModel.split("--\x3e")[0].trim()};await this.as.getFilesAction(e),this.rows=this.as.getFiles,this.loading=!1}catch(e){console.log(e),this.loading=!1}}},async loadFastFiles(){if(""!==this.fastWordSearch){this.loading=!0,this.rows=[];try{const e={user:null!=this.q.localStorage.getItem("currentUser")&&""!=this.q.localStorage.getItem("currentUser")?this.q.localStorage.getItem("currentUser").trim():"",search_word:this.fastWordSearch.trim(),all:this.deep?"all":"no"};await this.as.getFastFilesAction(e),this.rows=this.as.getFastFiles,this.loading=!1}catch(e){console.log(e),this.loading=!1}}},async loadQueries(){if(this.fileNameModel){this.loading=!0,this.queries=[];try{const e={lib:this.model,fileName:this.fileNameModel.split("--\x3e")[0].trim()};await this.as.getQueriesAction(e),this.queries=this.as.getQueries,this.loading=!1}catch(e){console.log(e),this.loading=!1}}},async loadFilenames(){try{const e={filename:this.model};this.loadingInputFiles=!0,await this.as.getFilenamesAction(e),this.filenamesArray=[],this.as.getFilenames.forEach((e=>{this.filenamesArray.push(e.TABLE_NAME+" --\x3e "+e.TABLE_TEXT)})),this.loadingInputFiles=!1}catch(e){console.log(e)}},async loadUsers(){try{const e={user:""};await this.pref.setUserPref(this.q.localStorage.getItem("currentUser")),await this.pref.getUserPrefAsObj.length>0&&(this.group=this.pref.getUserPrefAsObj[0].value,this.model=this.group),await this.as.getUsersAction(e),await this.as.getUsers.forEach((e=>{this.stringOptions.push(e.TABLE_SCHEMA)})),this.loadFilenames()}catch(e){console.log(e)}}},watch:{queryToggle(e,t){e&&this.loadQueries()},fileNameModel(e,t){""!==e&&null!=this.fileNameModel&&this.queryToggle&&this.loadQueries()},fastWordSearch(e,t){}},created(){this.as=(0,p.o)(),this.pref=(0,g.H)(),this.loadUsers()}};var E=l(4260),b=l(151),y=l(5589),F=l(8758),P=l(7208),L=l(3414),U=l(2035),A=l(8886),T=l(4842),C=l(4554),N=l(8240),R=l(5735),q=l(8107),_=l(7518),M=l.n(_);const S=(0,E.Z)(w,[["render",u]]),O=S;M()(w,"components",{QCard:b.Z,QCardSection:y.Z,QOptionGroup:F.Z,QSelect:P.Z,QItem:L.Z,QItemSection:U.Z,QToggle:A.Z,QInput:T.Z,QIcon:C.Z,QBtn:N.Z,QCheckbox:R.Z,QTable:q.Z})}}]);