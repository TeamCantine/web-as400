"use strict";(self["webpackChunkweb_as400"]=self["webpackChunkweb_as400"]||[]).push([[499],{1390:(e,r,t)=>{t.d(r,{o:()=>l});t(6701);var a=t(7831);const l=(0,a.Q_)("as",{state:()=>({currentUser:"",queries:[],files:[],fastFiles:[],users:[],filenames:[]}),getters:{getCurrentUser:e=>e.currentUser,getQueries:e=>e.queries,getFiles:e=>e.files,getUsers:e=>e.users,getFilenames:e=>e.filenames,getFastFiles:e=>e.fastFiles},actions:{setCurrentUser(e){this.currentUser=e},async getQueriesAction(e){let r="http://"+window.location.hostname+":3300/files/all/?library="+e.lib+"&tablename="+e.fileName;e.lib,e.fileName;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.queries=a},async getFilesAction(e){let r="http://"+window.location.hostname+":3300/files/PRTFFLD1/?library="+e.lib+"&tablename="+e.fileName;e.lib,e.fileName;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.files=a},async getFastFilesAction(e){let r="http://"+window.location.hostname+":3300/files/PRTFFLD_SMART/?search_word="+e.search_word+"&user="+e.user+"&all="+e.all;e.search_word,e.user,e.all;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.fastFiles=a},async getUsersAction(e){let r="http://"+window.location.hostname+":3300/files/SCHEMA/?library="+e.user;e.user;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.users=a},async getFilenamesAction(e){const r="http://"+window.location.hostname+":3300/files/FILENAMES/?library="+e.filename,t=(e.filename,await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"})),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.filenames=a}}})},5214:(e,r,t)=>{t.d(r,{H:()=>l});t(6701);var a=t(7831);const l=(0,a.Q_)("pref",{state:()=>({userPref:[],insertOrDeleteStatus:null}),getters:{getUserPref:e=>e.userPref,getInsertOrDeleteStatus:e=>e.insertOrDeleteStatus,getUserPrefAsObj:e=>{if(e.userPref.length<1)return[];var r=[];return r.push({label:e.userPref[0].PREFL1,value:e.userPref[0].PREFL1}),"NULL"!==e.userPref[0].PREFL2&&""!==e.userPref[0].PREFL2.trim()&&r.push({label:e.userPref[0].PREFL2,value:e.userPref[0].PREFL2}),"NULL"!==e.userPref[0].PREFL3&&""!==e.userPref[0].PREFL3.trim()&&r.push({label:e.userPref[0].PREFL3,value:e.userPref[0].PREFL3}),"NULL"!==e.userPref[0].PREFL4&&""!==e.userPref[0].PREFL4.trim()&&r.push({label:e.userPref[0].PREFL4,value:e.userPref[0].PREFL4}),"NULL"!==e.userPref[0].PREFL5&&""!==e.userPref[0].PREFL5.trim()&&r.push({label:e.userPref[0].PREFL5,value:e.userPref[0].PREFL5}),r}},actions:{async setUserPref(e){let r="http://"+window.location.hostname+":3300/files/USERPREF/?user="+e;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.userPref=a},async insertOrUpdateUserPrefs(e){let r="http://"+window.location.hostname+":3300/files/inserOrUpdatePref/?libdat="+e.user+"&PREFL1="+e.prefl1+"&PREFL2="+e.prefl2+"&PREFL3="+e.prefl3+"&PREFL4="+e.prefl4+"&PREFL5="+e.prefl5;e.user,e.prefl1,e.prefl2,e.prefl3,e.prefl4,e.prefl5;const t=await fetch(r,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",enctype:"mutipart/form-data"}),a=await t.json();if(!t.ok)throw 409===a.code?new Error(a.message):new Error("Request failed with error code: "+t.status);this.insertOrDeleteStatus=a}}})},6499:(e,r,t)=>{t.r(r),t.d(r,{default:()=>q});var a=t(3673),l=t(1959),s=t(8825),o=t(5214),n=t(1390);const i={class:"q-pa-md row items-start q-gutter-md"},u=(0,a._)("div",{class:"text-h6"},"Librerie preferite",-1),c=(0,a.Uk)(" Scegliere 5 librerie che usi più frequentemente in modo da permettere una ricerca più veloce. "),f={class:"q-pa-md row items-start q-gutter-md"},d=(0,a.Uk)("No results"),m=(0,a.Uk)("No results"),p=(0,a.Uk)("No results"),w=(0,a.Uk)("No results"),h=(0,a.Uk)("No results"),P=(0,a.Uk)("Save"),g={setup(e){const r=(0,l.iH)(null),t=(0,l.iH)(null),g=(0,l.iH)(null),v=(0,l.iH)(null),b=(0,l.iH)(null),E=(0,l.iH)([]),U=(0,l.iH)([]),F=(0,o.H)(),y=(e,r)=>{r(""!==e?()=>{const r=e.toLowerCase();U.value=E.value.filter((e=>e.toLowerCase().indexOf(r)>-1))}:()=>{U.value=E.value})},L=(0,n.o)(),R=async()=>{try{const e={user:""};await L.getUsersAction(e),L.getUsers.forEach((e=>{E.value.push(e.TABLE_SCHEMA)}))}catch(e){console.log(e)}},_=(0,s.Z)(),A=async()=>{await F.setUserPref(_.localStorage.getItem("currentUser")),console.log(_.localStorage.getItem("currentUser")),console.log(F.getUserPrefAsObj),F.getUserPrefAsObj.length&&(r.value=F.getUserPrefAsObj[0].value,t.value=void 0!=F.getUserPrefAsObj[1]?F.getUserPrefAsObj[1].value:"",g.value=void 0!=F.getUserPrefAsObj[2]?F.getUserPrefAsObj[2].value:"",v.value=void 0!=F.getUserPrefAsObj[3]?F.getUserPrefAsObj[3].value:"",b.value=void 0!=F.getUserPrefAsObj[4]?F.getUserPrefAsObj[4].value:"")},j=async()=>{null==r.value&&null==t.value&&null==g.value&&null==v.value&&null==b.value&&_.dialog({title:"Attenzione",message:"Selezionare almeno una libreria preferita!"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{})),await F.insertOrUpdateUserPrefs({user:_.localStorage.getItem("currentUser"),prefl1:r.value,prefl2:t.value,prefl3:g.value,prefl4:v.value,prefl5:b.value}),_.notify({color:"primary",textColor:"white",icon:"save",message:"Preferenza salvata con successo",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]}),A()};return(0,a.bv)((()=>{console.log("mounted!"),R(),A()})),(e,l)=>{const s=(0,a.up)("q-card-section"),o=(0,a.up)("q-separator"),n=(0,a.up)("q-item-section"),E=(0,a.up)("q-item"),F=(0,a.up)("q-select"),L=(0,a.up)("q-btn"),R=(0,a.up)("q-card-actions"),_=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(_,{bordered:"",class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(s,{class:"q-pt-none"},{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(o,{inset:""}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a._)("div",f,[(0,a.Wm)(F,{filled:"",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 1",clearable:"",options:U.value,onFilter:y,behavior:"menu"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[d])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(F,{filled:"",modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 2",clearable:"",options:U.value,onFilter:y,behavior:"menu"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[m])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(F,{filled:"",modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 3 ",clearable:"",options:U.value,onFilter:y,behavior:"menu"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(F,{filled:"",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 4",clearable:"",options:U.value,onFilter:y,behavior:"menu"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[w])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(F,{filled:"",modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),"use-input":"","input-debounce":"0",label:"LIBDAT 5",clearable:"",options:U.value,onFilter:y,behavior:"menu"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[h])),_:1})])),_:1})])),_:1},8,["modelValue","options"])])])),_:1}),(0,a.Wm)(R,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{flat:"",onClick:j},{default:(0,a.w5)((()=>[P])),_:1})])),_:1})])),_:1})])}}};var v=t(151),b=t(5589),E=t(5869),U=t(4019),F=t(3414),y=t(2035),L=t(9367),R=t(8240),_=t(7518),A=t.n(_);const j=g,q=j;A()(g,"components",{QCard:v.Z,QCardSection:b.Z,QSeparator:E.Z,QSelect:U.Z,QItem:F.Z,QItemSection:y.Z,QCardActions:L.Z,QBtn:R.Z})}}]);